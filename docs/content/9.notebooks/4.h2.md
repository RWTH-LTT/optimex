---
title: Hydrogen Production Pathway
description: Jupyter notebook example - Hydrogen Production Pathway
---

# Hydrogen Production Pathway

::alert{type="info"}
This page is automatically generated from a Jupyter notebook. You can [download the original notebook](https://github.com/RWTH-LTT/optimex/blob/main/notebooks/h2.ipynb) to run it yourself.
::

```python
import bw2data as bd
from datetime import datetime
```


```python
bd.projects.set_current("optimex_test")
```


```python
if "foreground" in bd.databases:
    del bd.databases["foreground"] # to make sure we create the foreground from scratch
foreground = bd.Database("foreground")
foreground.register()
```


```python
bg_h2_smr = bd.get_node(database="ei311_REMIND_SSP2_PkBudg650_2020", name="hydrogen production, steam methane reforming", location="EUR")

bg_h2_pem = bd.get_node(database="ei311_REMIND_SSP2_PkBudg650_2020", name="hydrogen production, gaseous, 30 bar, from PEM electrolysis, from grid electricity", location="EUR")
```


```python
hydrogen = foreground.new_node(
    name="hydrogen",
    unit="kg",
    type=bd.labels.product_node_default,
)
hydrogen.save()
```


Processes:


```python
def productify(background_node, new_product_node, foreground_db_name="foreground", process_name=None, process_location="GLO"):
    """
    Copies a background process to the foreground database as a new process producing a new, 
    explicit product. Keeps all non-production exchanges the unchanged. Essentially turning a 
    "processwithreferenceproduct" into a "process". Products need to be created as new nodes 
    beforehand.
    """
    assert (
        len(background_node.production()) == 1
    ), "Multifunctional process, not sure what to do"

    fg = bd.Database(foreground_db_name)

    new_name = process_name if process_name else background_node["name"]
    new_location = process_location if process_location else background_node["location"]
    
    new_process_node = fg.new_node(
        name=new_name,
        location=new_location,
        type=bd.labels.process_node_default,
    )
    new_process_node.save()

    new_process_node.new_edge(
        input=new_product_node,
        amount=1.0,
        type=bd.labels.production_edge_default,
    ).save()

    for exc in background_node.technosphere():
        new_process_node.new_edge(
            input=exc.input,
            amount=exc.amount,
            type=bd.labels.consumption_edge_default,
        ).save()

    for exc in background_node.biosphere():
        new_process_node.new_edge(
            input=exc.input,
            amount=exc.amount,
            type=bd.labels.biosphere_edge_default,
        ).save()

    return new_process_node
```


```python
# bg_dac = bd.get_node(database="ei311_REMIND_SSP2_PkBudg650_2020", name="carbon dioxide, captured, with a solvent-based direct air capture system, 1MtCO2", location="RER")
# bg_cc_cement = bd.get_node(database="ei311_REMIND_SSP2_PkBudg650_2020", name="carbon dioxide, captured at cement production plant, integrated in fuel production chain", location="RER")

# cc_cement = productify(bg_cc_cement, captured_co2, process_name="carbon capture at cement plant", process_location="RER")
# dac = productify(bg_dac, captured_co2, process_name="direct air capture", process_location="RER")

# productify(bg_meoh_biomass_gasification, methanol, process_name="methanol from biomass gasification", process_location="EUR")
# productify(bg_meoh_wood_ccs, methanol, process_name="methanol from wood with CCS", process_location="RER")
# productify(bg_meoh_ng, methanol, process_name="methanol from natural gas", process_location="RER")
# productify(bg_meoh_h2_cement, methanol, process_name="methanol from H2 and cement CO2", process_location="RER")

```


```python
h2_smr = productify(bg_h2_smr, hydrogen, process_name="hydrogen from SMR", process_location="EUR")
h2_pem = productify(bg_h2_pem, hydrogen, process_name="hydrogen from PEM electrolysis", process_location="EUR")
```


```python
from bw_temporalis import easy_timedelta_distribution
```


```python
h2_smr["operation_time_limits"] = (0, 15)
for exc in h2_smr.exchanges():
    exc["temporal_distribution"] = easy_timedelta_distribution(start=0, end=15, steps=16, kind="uniform", resolution="Y")
    exc["operation"] = True
    exc.save()
h2_smr.save()
```


```python
h2_pem["operation_time_limits"] = (0, 5)
for exc in h2_pem.exchanges():
    exc["temporal_distribution"] = easy_timedelta_distribution(start=0, end=5, steps=6, kind="uniform", resolution="Y")
    exc["operation"] = True
    exc.save()
h2_pem.save()
```


```python
# bg_meoh_h2 = bd.get_node(database="ei311_REMIND_SSP2_PkBudg650_2020", name="methanol synthesis, hydrogen from electrolysis, CO2 from DAC", location="RER")

# meoh_from_h2 = foreground.new_node(
#     name="methanol production from hydrogen",
#     location="RER",
#     type=bd.labels.process_node_default,
# )
# meoh_from_h2.save()

# meoh_from_h2.new_edge(
#     input=methanol,
#     amount=1.0,
#     type=bd.labels.production_edge_default,
# ).save()

# for exc in bg_meoh_h2.technosphere():
#     if "carbon dioxide, captured" in exc.input["name"].lower():
#         meoh_from_h2.new_edge(
#             input=captured_co2,
#             amount=exc.amount,
#             type=bd.labels.consumption_edge_default,
#         ).save()
#         continue
    
#     if "hydrogen production" in exc.input["name"].lower():
#         meoh_from_h2.new_edge(
#             input=hydrogen,
#             amount=exc.amount,
#             type=bd.labels.consumption_edge_default,
#         ).save()
#         continue
    
#     meoh_from_h2.new_edge(
#         input=exc.input,
#         amount=exc.amount,
#         type=bd.labels.consumption_edge_default,
#     ).save()
    
# for exc in bg_meoh_h2.biosphere():
#     meoh_from_h2.new_edge(
#         input=exc.input,
#         amount=exc.amount,
#         type=bd.labels.biosphere_edge_default,
#     ).save()
```


```python
dbs = {
    2020: bd.Database("ei311_REMIND_SSP2_PkBudg650_2020"),
    # 2030: bd.Database("ei311_REMIND_SSP2_PkBudg650_2030"),
    # 2040: bd.Database("ei311_REMIND_SSP2_PkBudg650_2040"),
    2050: bd.Database("ei311_REMIND_SSP2_PkBudg650_2050"),
}

# Add representative_time metadata for each database
for year, db in dbs.items():
    db.metadata["representative_time"] = datetime(year, 1, 1).isoformat()
```


```python
# exchanges = list(dac.technosphere()) + list(cc_cement.technosphere()) + list(meoh_from_h2.technosphere())

# for exc in exchanges:
#     node=exc.input
#     if node["database"] == bd.Database("ecoinvent-3.11-biosphere").name:
#         continue
#     if node["type"] != bd.labels.chimaera_node_default:
#         continue
#     for db in dbs.values():
#         node_in_other_db = db.get(
#             name=node["name"],
#             product=node.get("reference product", None),
#             location=node["location"],
#         )
#         if node["code"] != node_in_other_db["code"]:
#             node_in_other_db["code"] = node["code"]
#             node_in_other_db.save()
```


```python
from bw_temporalis import TemporalDistribution
import numpy as np
import math

years = range(2025, 2050)

# build alternating 10, 5, 10, 5, ...
amount_pattern = [10, 5] * math.ceil(len(years) / 2)
amount = np.array(amount_pattern[:len(years)], dtype=float)

td_demand = TemporalDistribution(
    date=np.array([datetime(year, 1, 1).isoformat() for year in years],
                  dtype="datetime64[s]"),
    amount=amount,
)

functional_demand = {hydrogen: td_demand}
```


```python
from optimex import lca_processor

method = (
    "ecoinvent-3.11",
    "EF v3.1 no LT",
    "climate change no LT",
    "global warming potential (GWP100) no LT",
)

lca_config = lca_processor.LCAConfig(
    demand=functional_demand,
    temporal={
        "start_date": datetime(2020, 1, 1),
        "temporal_resolution": "year",
        "time_horizon": 100,
    },
    characterization_methods=[
        {
            "category_name": "climate_change",
            "brightway_method": method,
            # "metric": "CRF",  # CRF
        },
    ],
)
```


```python
from optimex import converter

lca_data_processor = lca_processor.LCADataProcessor(lca_config)
manager = converter.ModelInputManager()
optimization_model_inputs = manager.parse_from_lca_processor(lca_data_processor) 
```

```plaintext
2025-12-17 16:22:17.968 | INFO     | optimex.lca_processor:_parse_demand:385 - Identified demand in system time range of %s for products %s
2025-12-17 16:22:17.988 | INFO     | optimex.lca_processor:_construct_foreground_tensors:521 - Constructed foreground tensors.
2025-12-17 16:22:17.989 | INFO     | optimex.lca_processor:log_tensor_dimensions:516 - Technosphere (external) shape: (2 processes, 21 flows, 16 years) with 276 total entries.
2025-12-17 16:22:17.989 | INFO     | optimex.lca_processor:log_tensor_dimensions:516 - Internal demand shape: (0 processes, 0 flows, 0 years) with 0 total entries.
2025-12-17 16:22:17.990 | INFO     | optimex.lca_processor:log_tensor_dimensions:516 - Biosphere shape: (2 processes, 28 flows, 16 years) with 408 total entries.
2025-12-17 16:22:17.990 | INFO     | optimex.lca_processor:log_tensor_dimensions:516 - Production shape: (2 processes, 1 flows, 16 years) with 22 total entries.
2025-12-17 16:22:17.990 | INFO     | optimex.lca_processor:_calculate_inventory_of_db:560 - Calculating inventory for database: ei311_REMIND_SSP2_PkBudg650_2020
/Users/timodiepers/anaconda3/envs/optimex/lib/python3.11/site-packages/bw2calc/lca_base.py:127: SparseEfficiencyWarning: splu converted its input to CSC format
  self.solver = factorized(self.technosphere_matrix)
/Users/timodiepers/anaconda3/envs/optimex/lib/python3.11/site-packages/scikits/umfpack/umfpack.py:736: UmfpackWarning: (almost) singular matrix! (estimated cond. number: 4.50e+12)
  warnings.warn(msg, UmfpackWarning)
2025-12-17 16:22:20.513 | INFO     | optimex.lca_processor:_calculate_inventory_of_db:576 - Factorized LCI for database: ei311_REMIND_SSP2_PkBudg650_2020
  5%|▍         | 1/21 [00:00<00:14,  1.42it/s]/Users/timodiepers/anaconda3/envs/optimex/lib/python3.11/site-packages/scikits/umfpack/umfpack.py:736: UmfpackWarning: (almost) singular matrix! (estimated cond. number: 4.50e+12)
  warnings.warn(msg, UmfpackWarning)
 10%|▉         | 2/21 [00:01<00:11,  1.64it/s]/Users/timodiepers/anaconda3/envs/optimex/lib/python3.11/site-packages/scikits/umfpack/umfpack.py:736: UmfpackWarning: (almost) singular matrix! (estimated cond. number: 4.50e+12)
  warnings.warn(msg, UmfpackWarning)
 14%|█▍        | 3/21 [00:01<00:10,  1.74it/s]/Users/timodiepers/anaconda3/envs/optimex/lib/python3.11/site-packages/scikits/umfpack/umfpack.py:736: UmfpackWarning: (almost) singular matrix! (estimated cond. number: 4.50e+12)
  warnings.warn(msg, UmfpackWarning)
 19%|█▉        | 4/21 [00:02<00:10,  1.67it/s]/Users/timodiepers/anaconda3/envs/optimex/lib/python3.11/site-packages/scikits/umfpack/umfpack.py:736: UmfpackWarning: (almost) singular matrix! (estimated cond. number: 4.50e+12)
  warnings.warn(msg, UmfpackWarning)
 24%|██▍       | 5/21 [00:02<00:09,  1.74it/s]/Users/timodiepers/anaconda3/envs/optimex/lib/python3.11/site-packages/scikits/umfpack/umfpack.py:736: UmfpackWarning: (almost) singular matrix! (estimated cond. number: 4.50e+12)
  warnings.warn(msg, UmfpackWarning)
 29%|██▊       | 6/21 [00:03<00:08,  1.72it/s]/Users/timodiepers/anaconda3/envs/optimex/lib/python3.11/site-packages/scikits/umfpack/umfpack.py:736: UmfpackWarning: (almost) singular matrix! (estimated cond. number: 4.50e+12)
  warnings.warn(msg, UmfpackWarning)
 33%|███▎      | 7/21 [00:04<00:08,  1.73it/s]/Users/timodiepers/anaconda3/envs/optimex/lib/python3.11/site-packages/scikits/umfpack/umfpack.py:736: UmfpackWarning: (almost) singular matrix! (estimated cond. number: 4.50e+12)
...
(output truncated)
...
2025-12-17 16:22:39.499 | WARNING  | optimex.lca_processor:_calculate_inventory_of_db:571 - Failed to get activity for key 'd46c4b3b9c97467ea2bc47417a67c0f6': 
2025-12-17 16:22:39.500 | WARNING  | optimex.lca_processor:_calculate_inventory_of_db:571 - Failed to get activity for key '53b411e250e84240a3799fe1efeb3805': 
2025-12-17 16:22:39.501 | WARNING  | optimex.lca_processor:_calculate_inventory_of_db:571 - Failed to get activity for key '841404f320ce484c847c07cd08a86831': 
2025-12-17 16:22:39.502 | WARNING  | optimex.lca_processor:_calculate_inventory_of_db:571 - Failed to get activity for key '5dac439c6c0241f88c8fc219435673bd': 
2025-12-17 16:22:39.502 | WARNING  | optimex.lca_processor:_calculate_inventory_of_db:571 - Failed to get activity for key '56fb1be54bbd4384b9c5dae55305d8fe': 
2025-12-17 16:22:39.503 | WARNING  | optimex.lca_processor:_calculate_inventory_of_db:571 - Failed to get activity for key '2524df8fcdb0417da9fdb1e701bceaef': 
2025-12-17 16:22:39.503 | WARNING  | optimex.lca_processor:_calculate_inventory_of_db:571 - Failed to get activity for key 'b2c81c81c1254a93b5cd1fbbad5dfecc': 
2025-12-17 16:22:39.504 | WARNING  | optimex.lca_processor:_calculate_inventory_of_db:571 - Failed to get activity for key '0d4a5ee595b7409385a22fd0d037731f': 
2025-12-17 16:22:39.504 | WARNING  | optimex.lca_processor:_calculate_inventory_of_db:571 - Failed to get activity for key '287f2c42cda849b5abe57c9244b36991': 
2025-12-17 16:22:39.505 | WARNING  | optimex.lca_processor:_calculate_inventory_of_db:571 - Failed to get activity for key '8e4e7279ceb54f7d85aeeb1d5e3bd4c7': 
2025-12-17 16:22:39.506 | WARNING  | optimex.lca_processor:_calculate_inventory_of_db:571 - Failed to get activity for key 'bf38c5aecc9e4888bf1f199c905de08b': 
2025-12-17 16:22:39.506 | WARNING  | optimex.lca_processor:_calculate_inventory_of_db:571 - Failed to get activity for key '2a73b344e023432086b99c17c47be8dd': 
/Users/timodiepers/anaconda3/envs/optimex/lib/python3.11/site-packages/scikits/umfpack/umfpack.py:736: UmfpackWarning: (almost) singular matrix! (estimated cond. number: 1.65e+13)
  warnings.warn(msg, UmfpackWarning)
2025-12-17 16:22:40.128 | INFO     | optimex.lca_processor:_calculate_inventory_of_db:576 - Factorized LCI for database: ei311_REMIND_SSP2_PkBudg650_2050
 33%|███▎      | 1/3 [00:01<00:02,  1.07s/it]/Users/timodiepers/anaconda3/envs/optimex/lib/python3.11/site-packages/scikits/umfpack/umfpack.py:736: UmfpackWarning: (almost) singular matrix! (estimated cond. number: 1.65e+13)
  warnings.warn(msg, UmfpackWarning)
 67%|██████▋   | 2/3 [00:01<00:00,  1.05it/s]/Users/timodiepers/anaconda3/envs/optimex/lib/python3.11/site-packages/scikits/umfpack/umfpack.py:736: UmfpackWarning: (almost) singular matrix! (estimated cond. number: 1.65e+13)
  warnings.warn(msg, UmfpackWarning)
100%|██████████| 3/3 [00:02<00:00,  1.09it/s]
2025-12-17 16:22:42.869 | INFO     | optimex.lca_processor:_calculate_inventory_of_db:616 - Finished calculating inventory for database: ei311_REMIND_SSP2_PkBudg650_2050
2025-12-17 16:22:42.878 | INFO     | optimex.lca_processor:_prepare_background_inventory:723 - Computed background inventory using method: sequential
2025-12-17 16:22:43.008 | INFO     | optimex.lca_processor:_construct_characterization_tensor:834 - Static characterization for method climate_change completed.
2025-12-17 16:22:43.008 | INFO     | optimex.lca_processor:_construct_mapping_matrix:777 - Constructed mapping matrix for background databases based on linear interpolation.

```


```python
manager.save("model_inputs.json") # if you want to save the model inputs to a file
```


```python
from optimex import converter
manager = converter.ModelInputManager()

optimization_model_inputs = manager.load("model_inputs.json") # if you want to load the model inputs from a file
```


```python
from optimex import optimizer

model = optimizer.create_model(
    optimization_model_inputs,
    name = "demo_simple_example",
    objective_category = "climate_change",
)
```

```plaintext
2025-12-17 16:22:55.988 | INFO     | optimex.optimizer:create_model:123 - Creating sets
2025-12-17 16:22:55.989 | INFO     | optimex.optimizer:create_model:165 - Creating parameters
2025-12-17 16:22:56.025 | INFO     | optimex.optimizer:create_model:337 - Creating variables

```


```python
m, obj, results = optimizer.solve_model(model, solver_name="glpk", tee=False) # choose solver here, e.g. "gurobi", "cplex", "glpk", etc.
```

```plaintext
2025-12-17 16:23:16.679 | INFO     | optimex.optimizer:solve_model:694 - Solver [glpk] termination: optimal
2025-12-17 16:23:26.441 | INFO     | optimex.optimizer:solve_model:719 - Objective (scaled): 0.168863
2025-12-17 16:23:26.442 | INFO     | optimex.optimizer:solve_model:720 - Objective (real):   414.896

```


```python
from optimex import postprocessing
pp = postprocessing.PostProcessor(m)
```


```python
pp.plot_production_vs_capacity()
```

```plaintext
<Figure size 1000x600 with 1 Axes>
```

::alert{type="info"}
*Note: Image output from this cell is not displayed in the documentation.*
::


```python
pp.plot_installation()
```

```plaintext
<Figure size 1000x600 with 1 Axes>
```

::alert{type="info"}
*Note: Image output from this cell is not displayed in the documentation.*
::


```python
pp.plot_operation()
```

```plaintext
<Figure size 1000x600 with 1 Axes>
```

::alert{type="info"}
*Note: Image output from this cell is not displayed in the documentation.*
::


```python
pp.plot_impacts()
```

```plaintext
<Figure size 2000x600 with 1 Axes>
```

::alert{type="info"}
*Note: Image output from this cell is not displayed in the documentation.*
::


```python
pp.plot_production_and_demand()
```

```plaintext
<Figure size 1000x600 with 1 Axes>
```

::alert{type="info"}
*Note: Image output from this cell is not displayed in the documentation.*
::

```plaintext
(<Figure size 1000x600 with 1 Axes>,
 <Axes: title={'center': 'Production and Demand'}, xlabel='Time', ylabel='Quantity'>)
```


```python
pp.get_impacts()
```

```plaintext
Category                   climate_change                                   \
Process  b6a60fb2c86e46fcbfbe1a0c3bf3425e c3d0b884a2e648699262b502ae53ab6d   
Time                                                                         
2015                                  0.0                     0.000000e+00   
2016                                  0.0                     0.000000e+00   
2017                                  0.0                     0.000000e+00   
2018                                  0.0                     0.000000e+00   
2019                                  0.0                     0.000000e+00   
2020                                  0.0                     0.000000e+00   
2021                                  0.0                     0.000000e+00   
2022                                  0.0                     0.000000e+00   
2023                                  0.0                     0.000000e+00   
2024                                  0.0                     0.000000e+00   
2025                                  0.0                     0.000000e+00   
2026                                  0.0                     6.759117e-12   
2027                                  0.0                     5.430383e-12   
2028                                  0.0                     4.123261e-12   
2029                                  0.0                     2.837842e-12   
2030                                  0.0                     1.574218e-12   
2031                                  0.0                     1.463040e-12   
2032                                  0.0                     1.353577e-12   
2033                                  0.0                     1.245834e-12   
2034                                  0.0                     1.139820e-12   
2035                                  0.0                     1.035542e-12   
2036                                  0.0                     9.330082e-13   
...
(output truncated)
...
2045                                  0.0                              0.0  
2046                                  0.0                              0.0  
2047                                  0.0                              0.0  
2048                                  0.0                              0.0  
2049                                  0.0                              0.0  
2050                                  0.0                              0.0  
2051                                  0.0                              0.0  
2052                                  0.0                              0.0  
2053                                  0.0                              0.0  
2054                                  0.0                              0.0  
2055                                  0.0                              0.0  
2056                                  0.0                              0.0  
2057                                  0.0                              0.0  
2058                                  0.0                              0.0  
2059                                  0.0                              0.0  
2060                                  0.0                              0.0  
2061                                  0.0                              0.0  
2062                                  0.0                              0.0  
2063                                  0.0                              0.0  
2064                                  0.0                              0.0  
2065                                  0.0                              0.0  
2066                                  0.0                              0.0  
2067                                  0.0                              0.0  
2068                                  0.0                              0.0  
2069                                  0.0                              0.0  
```


```python
pp.plot_installation()
```

```plaintext
<Figure size 1000x600 with 1 Axes>
```

::alert{type="info"}
*Note: Image output from this cell is not displayed in the documentation.*
::

```plaintext
(<Figure size 1000x600 with 1 Axes>,
 <Axes: title={'center': 'Installed Capacity'}, xlabel='Time', ylabel='Installation'>)
```


```python
pp.plot_operation()
```

```plaintext
<Figure size 1000x600 with 1 Axes>
```

::alert{type="info"}
*Note: Image output from this cell is not displayed in the documentation.*
::

```plaintext
(<Figure size 1000x600 with 1 Axes>,
 <Axes: title={'center': 'Operational Level'}, xlabel='Time', ylabel='Operation'>)
```


```python
pp.plot_impacts()
```

```plaintext
<Figure size 1000x600 with 1 Axes>
```

::alert{type="info"}
*Note: Image output from this cell is not displayed in the documentation.*
::

```plaintext
(<Figure size 1000x600 with 1 Axes>,
 array([<Axes: title={'center': 'climate_change'}, xlabel='Time', ylabel='Value'>,
        <Axes: xlabel='Time', ylabel='Value'>], dtype=object))
```


```python
pp.plot_installation()
```

```plaintext
<Figure size 1000x600 with 1 Axes>
```

::alert{type="info"}
*Note: Image output from this cell is not displayed in the documentation.*
::

```plaintext
(<Figure size 1000x600 with 1 Axes>,
 <Axes: title={'center': 'Installed Capacity'}, xlabel='Time', ylabel='Installation'>)
```


```python
m.scales
```

```plaintext
{'foreground': 4.909090909090909,
 'characterization': {'climate_change': 2.3348057260696622e-11}}
```


```python
model.scales
```

```plaintext
{'foreground': 4.909090909090909,
 'characterization': {'climate_change': 2.3348057260696622e-11}}
```


```python
pp.get_operation()
```

```plaintext
Process  693b3d79849340fd9f8af7a47041607c  dac305c0bdeb4e6d8fcde37f622240d0
Time                                                                       
2015                                  0.0                               0.0
2016                                  0.0                               0.0
2017                                  0.0                               0.0
2018                                  0.0                               0.0
2019                                  0.0                               0.0
2020                                  0.0                             540.0
2021                                  0.0                             540.0
2022                                  0.0                             540.0
2023                                  0.0                             540.0
2024                                  0.0                             540.0
2025                                  0.0                             540.0
2026                                540.0                               0.0
2027                                540.0                               0.0
2028                                540.0                               0.0
2029                                540.0                               0.0
2030                                540.0                               0.0
2031                                540.0                               0.0
2032                                540.0                               0.0
2033                                540.0                               0.0
2034                                540.0                               0.0
2035                                540.0                               0.0
2036                                540.0                               0.0
2037                                540.0                               0.0
...
(output truncated)
...
2045                                540.0                               0.0
2046                                540.0                               0.0
2047                                540.0                               0.0
2048                                540.0                               0.0
2049                                540.0                               0.0
2050                                540.0                               0.0
2051                                540.0                               0.0
2052                                540.0                               0.0
2053                                540.0                               0.0
2054                                540.0                               0.0
2055                                540.0                               0.0
2056                                540.0                               0.0
2057                                540.0                               0.0
2058                                540.0                               0.0
2059                                540.0                               0.0
2060                                540.0                               0.0
2061                                540.0                               0.0
2062                                540.0                               0.0
2063                                540.0                               0.0
2064                                540.0                               0.0
2065                                540.0                               0.0
2066                                540.0                               0.0
2067                                540.0                               0.0
2068                                540.0                               0.0
2069                                540.0                               0.0
```


```python
pp.plot_operation()
```

```plaintext
<Figure size 1000x600 with 1 Axes>
```

::alert{type="info"}
*Note: Image output from this cell is not displayed in the documentation.*
::

```plaintext
(<Figure size 1000x600 with 1 Axes>,
 <Axes: title={'center': 'Operational Level'}, xlabel='Time', ylabel='Operation'>)
```


# --------------------------


### Plotting the resulting radiative forcing 


```python
import pyomo.environ as pyo 
fg_scale = getattr(pp.m, "scales", {}).get("foreground", 1.0)
inventory = {
    (p, e, t): pyo.value(pp.m.scaled_inventory[p, e, t]) * fg_scale
    for p in pp.m.PROCESS
    for e in pp.m.ELEMENTARY_FLOW
    for t in pp.m.SYSTEM_TIME
}

import pandas as pd

dynamic_inventory_df = pd.DataFrame.from_records(
    [(p, e, t, v) for (p, e, t), v in inventory.items()],
    columns=["activity", "flow", "date", "amount"]
).astype({
    "activity": "str",
    "flow": "str",
    # "date": "datetime64[s]",
    "amount": "float64"
})

dynamic_inventory_df['date'] = pd.to_datetime(dynamic_inventory_df['date'].astype(int), format='%Y')
```


```python
dynamic_inventory_df
```

```plaintext
                               activity                                  flow  \
0      a5d2821e34c24d078e8efdd93b289405  e3e8f6a2-c45e-4685-9859-698b2eadaf5b   
1      a5d2821e34c24d078e8efdd93b289405  e3e8f6a2-c45e-4685-9859-698b2eadaf5b   
2      a5d2821e34c24d078e8efdd93b289405  e3e8f6a2-c45e-4685-9859-698b2eadaf5b   
3      a5d2821e34c24d078e8efdd93b289405  e3e8f6a2-c45e-4685-9859-698b2eadaf5b   
4      a5d2821e34c24d078e8efdd93b289405  e3e8f6a2-c45e-4685-9859-698b2eadaf5b   
...                                 ...                                   ...   
92945  34fe9823ae894b6882216398c2ce9029  dcedc211-8daa-49ac-82a9-ce60a22d9b43   
92946  34fe9823ae894b6882216398c2ce9029  dcedc211-8daa-49ac-82a9-ce60a22d9b43   
92947  34fe9823ae894b6882216398c2ce9029  dcedc211-8daa-49ac-82a9-ce60a22d9b43   
92948  34fe9823ae894b6882216398c2ce9029  dcedc211-8daa-49ac-82a9-ce60a22d9b43   
92949  34fe9823ae894b6882216398c2ce9029  dcedc211-8daa-49ac-82a9-ce60a22d9b43   

            date  amount  
0     2015-01-01     0.0  
1     2016-01-01     0.0  
2     2017-01-01     0.0  
3     2018-01-01     0.0  
4     2019-01-01     0.0  
...          ...     ...  
92945 2065-01-01     0.0  
92946 2066-01-01     0.0  
92947 2067-01-01     0.0  
92948 2068-01-01     0.0  
92949 2069-01-01     0.0  

[92950 rows x 4 columns]
```


```python
dynamic_inventory_df["flow"] = dynamic_inventory_df["flow"].apply(
    lambda x: bd.Database("ecoinvent-3.11-biosphere").get(code=x).id
)
```


```python
from dynamic_characterization import characterize

df_characterized = characterize(
        dynamic_inventory_df,
        metric="radiative_forcing", # could also be GWP
        base_lcia_method=method,
        time_horizon=100,
        fixed_time_horizon=True,
)
```

```plaintext
2025-12-10 17:27:58.254 | INFO     | dynamic_characterization.dynamic_characterization:characterize:82 - No custom dynamic characterization functions provided. Using default dynamic             characterization functions. The flows that are characterized are based on the selection                of the initially chosen impact category.

```


```python
df_characterized['date'] = pd.to_datetime(df_characterized['date'])
df_grouped = (
    df_characterized
    .assign(date_rounded=(df_characterized['date'] + pd.offsets.MonthBegin(6)).dt.to_period('Y').dt.to_timestamp())
    .groupby('date_rounded')['amount'].sum()
    .reset_index()
)

df_grouped.plot(x='date_rounded', y='amount')
```

```plaintext
<Axes: xlabel='date_rounded'>
```

```plaintext
<Figure size 640x480 with 1 Axes>
```

::alert{type="info"}
*Note: Image output from this cell is not displayed in the documentation.*
::

